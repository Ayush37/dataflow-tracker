{"ast":null,"code":"// components/Sidebar.jsx\nimport React,{useEffect,useState}from'react';import{NavLink}from'react-router-dom';import{fetchFlows}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Sidebar=()=>{const[flows,setFlows]=useState([]);// Initialize as empty array\nconst[loading,setLoading]=useState(true);useEffect(()=>{const loadFlows=async()=>{try{const data=await fetchFlows();// Make sure we set an array, even if the API returns null or undefined\nif(data&&Array.isArray(data)){setFlows(data);}else{console.warn(\"API did not return an array:\",data);setFlows([]);}}catch(error){console.error('Error loading flows:',error);setFlows([]);// Set to empty array on error\n}finally{setLoading(false);}};loadFlows();},[]);const renderFlowItems=()=>{if(!Array.isArray(flows)||flows.length===0){return/*#__PURE__*/_jsx(\"li\",{className:\"text-sm text-gray-500\",children:\"No batch processes found\"});}return flows.map(flow=>{if(!flow||typeof flow!=='object'||!flow.name){return null;// Skip invalid items\n}return/*#__PURE__*/_jsx(\"li\",{className:\"mb-2\",children:/*#__PURE__*/_jsx(NavLink,{to:`/flows/${flow.name}`,className:_ref=>{let{isActive}=_ref;return`block p-2 rounded ${isActive?'bg-blue-500 text-white':'text-blue-900 hover:bg-blue-100'}`;},children:flow.name})},flow.name);});};return/*#__PURE__*/_jsxs(\"aside\",{className:\"w-64 bg-gray-100 p-4 overflow-auto border-r\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold mb-4\",children:\"Batch Processes\"}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"Loading...\"}):/*#__PURE__*/_jsxs(\"nav\",{children:[/*#__PURE__*/_jsx(\"ul\",{children:renderFlowItems()}),/*#__PURE__*/_jsx(\"div\",{className:\"border-t border-gray-300 my-4\"}),/*#__PURE__*/_jsx(NavLink,{to:\"/new\",className:_ref2=>{let{isActive}=_ref2;return`block p-2 rounded ${isActive?'bg-green-500 text-white':'text-green-700 hover:bg-green-100'}`;},children:\"Add New Process\"})]})]});};export default Sidebar;","map":{"version":3,"names":["React","useEffect","useState","NavLink","fetchFlows","jsx","_jsx","jsxs","_jsxs","Sidebar","flows","setFlows","loading","setLoading","loadFlows","data","Array","isArray","console","warn","error","renderFlowItems","length","className","children","map","flow","name","to","_ref","isActive","_ref2"],"sources":["/root/dataflow-tracker/frontend/src/components/Sidebar.jsx"],"sourcesContent":["// components/Sidebar.jsx\nimport React, { useEffect, useState } from 'react';\nimport { NavLink } from 'react-router-dom';\nimport { fetchFlows } from '../services/api';\n\nconst Sidebar = () => {\n  const [flows, setFlows] = useState([]);  // Initialize as empty array\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const loadFlows = async () => {\n      try {\n        const data = await fetchFlows();\n        // Make sure we set an array, even if the API returns null or undefined\n        if (data && Array.isArray(data)) {\n          setFlows(data);\n        } else {\n          console.warn(\"API did not return an array:\", data);\n          setFlows([]);\n        }\n      } catch (error) {\n        console.error('Error loading flows:', error);\n        setFlows([]); // Set to empty array on error\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadFlows();\n  }, []);\n\n  const renderFlowItems = () => {\n    if (!Array.isArray(flows) || flows.length === 0) {\n      return <li className=\"text-sm text-gray-500\">No batch processes found</li>;\n    }\n\n    return flows.map((flow) => {\n      if (!flow || typeof flow !== 'object' || !flow.name) {\n        return null; // Skip invalid items\n      }\n      \n      return (\n        <li key={flow.name} className=\"mb-2\">\n          <NavLink\n            to={`/flows/${flow.name}`}\n            className={({ isActive }) =>\n              `block p-2 rounded ${\n                isActive\n                  ? 'bg-blue-500 text-white'\n                  : 'text-blue-900 hover:bg-blue-100'\n              }`\n            }\n          >\n            {flow.name}\n          </NavLink>\n        </li>\n      );\n    });\n  };\n\n  return (\n    <aside className=\"w-64 bg-gray-100 p-4 overflow-auto border-r\">\n      <h2 className=\"text-lg font-semibold mb-4\">Batch Processes</h2>\n      \n      {loading ? (\n        <div className=\"text-sm text-gray-500\">Loading...</div>\n      ) : (\n        <nav>\n          <ul>\n            {renderFlowItems()}\n          </ul>\n          <div className=\"border-t border-gray-300 my-4\"></div>\n          <NavLink\n            to=\"/new\"\n            className={({ isActive }) =>\n              `block p-2 rounded ${\n                isActive\n                  ? 'bg-green-500 text-white'\n                  : 'text-green-700 hover:bg-green-100'\n              }`\n            }\n          >\n            Add New Process\n          </NavLink>\n        </nav>\n      )}\n    </aside>\n  );\n};\n\nexport default Sidebar;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}