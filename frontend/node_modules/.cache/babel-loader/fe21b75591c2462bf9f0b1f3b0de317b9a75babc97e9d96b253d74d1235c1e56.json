{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useParams,useNavigate}from'react-router-dom';import{fetchFlowDefinition,fetchFlowStatus}from'../services/api';import FlowVisualizer from'../components/FlowVisualizer';import StatusPanel from'../components/StatusPanel';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const FlowDetails=()=>{const{flowName}=useParams();const navigate=useNavigate();const[flowData,setFlowData]=useState(null);const[statusData,setStatusData]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const loadData=async()=>{try{setLoading(true);// Fetch flow definition\nconst flowDefinition=await fetchFlowDefinition(flowName);setFlowData(flowDefinition);// Fetch current status\nconst status=await fetchFlowStatus(flowName);setStatusData(status);setError(null);}catch(err){console.error(err);setError(`Error loading flow: ${err.message}`);// If flow not found, redirect to 404\nif(err.response&&err.response.status===404){navigate('/404');}}finally{setLoading(false);}};if(flowName){loadData();}},[flowName,navigate]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-lg\",children:\"Loading...\"})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4\",children:/*#__PURE__*/_jsx(\"p\",{children:error})});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-bold\",children:[flowName,\" Process Flow\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:statusData&&statusData.timestamp&&/*#__PURE__*/_jsxs(_Fragment,{children:[\"Last updated: \",new Date(statusData.timestamp).toLocaleString()]})})]}),/*#__PURE__*/_jsx(StatusPanel,{flowData:flowData,lastUpdated:statusData===null||statusData===void 0?void 0:statusData.timestamp}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow p-4 mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-[600px]\",children:/*#__PURE__*/_jsx(FlowVisualizer,{})})})]});};export default FlowDetails;","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","fetchFlowDefinition","fetchFlowStatus","FlowVisualizer","StatusPanel","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FlowDetails","flowName","navigate","flowData","setFlowData","statusData","setStatusData","loading","setLoading","error","setError","loadData","flowDefinition","status","err","console","message","response","className","children","timestamp","Date","toLocaleString","lastUpdated"],"sources":["/root/dataflow-tracker/frontend/src/pages/FlowDetails.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { fetchFlowDefinition, fetchFlowStatus } from '../services/api';\nimport FlowVisualizer from '../components/FlowVisualizer';\nimport StatusPanel from '../components/StatusPanel';\n\nconst FlowDetails = () => {\n  const { flowName } = useParams();\n  const navigate = useNavigate();\n  const [flowData, setFlowData] = useState(null);\n  const [statusData, setStatusData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        setLoading(true);\n        \n        // Fetch flow definition\n        const flowDefinition = await fetchFlowDefinition(flowName);\n        setFlowData(flowDefinition);\n        \n        // Fetch current status\n        const status = await fetchFlowStatus(flowName);\n        setStatusData(status);\n        \n        setError(null);\n      } catch (err) {\n        console.error(err);\n        setError(`Error loading flow: ${err.message}`);\n        \n        // If flow not found, redirect to 404\n        if (err.response && err.response.status === 404) {\n          navigate('/404');\n        }\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (flowName) {\n      loadData();\n    }\n  }, [flowName, navigate]);\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-lg\">Loading...</div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4\">\n        <p>{error}</p>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      <div className=\"mb-6\">\n        <h1 className=\"text-2xl font-bold\">{flowName} Process Flow</h1>\n        <p className=\"text-gray-600\">\n          {statusData && statusData.timestamp && (\n            <>Last updated: {new Date(statusData.timestamp).toLocaleString()}</>\n          )}\n        </p>\n      </div>\n      \n      <StatusPanel flowData={flowData} lastUpdated={statusData?.timestamp} />\n      \n      <div className=\"bg-white rounded-lg shadow p-4 mb-4\">\n        <div className=\"h-[600px]\">\n          <FlowVisualizer />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default FlowDetails;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}